---
title: 【Udemy】手を動かして理解する！OAuth2 / OpenID Connect の基礎と活用
description: 
published: true
date: 2024-11-17T02:13:34.965Z
tags: oauth2, open id connect
editor: markdown
dateCreated: 2024-11-04T03:26:29.847Z
---

## OAuth2の仕組み
### なぜ認可コードが必要なのか？
- アクセストークンをブラウザに渡すと盗まれるなどの危険性があるため、ブラウザに触れさせずにしたいから。

#### どんなリスク？
- HTTPSを使えばリスクは減らせるが、HTTPなどを使うと盗まれるリスクあり。
- XSSなどの攻撃で抜き取られるリスクあり。

### 認可コードはブラウザ側で扱うが、それが盗まれたら、アクセストークンを取得されてしまうのでは？
- それがないように様々な仕組みが施されている。
- 例えば、
	- 発行されてから短時間で無効にしなければならない。
  - 有効期限は最大でも10分を推奨する。
  - クライアントは2回以上認可コードを使用してはならない。
  - 認可サーバは2回以上の場合拒否しなければいけない。
  - 認可コードを基に発行されたこれまでのすべてのトークンを無効化すべきである。
  
ref.
 https://openid-foundation-japan.github.io/rfc6749.ja.html
 
 ### クライアントにはコンフィデンシャルとパブリックがあるがどのような違いか？
- 認可コードグラントにおいて使用可能なクライアントの形態がコンフィデンシャルクライアント。
- バックエンドが存在していて、秘匿情報をクライアントから取得できない形態。
- パブリッククライアントはブラウザなどのアプリケーションが直接、秘匿情報を扱う。

### インプリシットグラントとは？認可コードとの違いは？
- パブリッククライアントで使う。
- client_secretがない。
- 直接ブラウザがアクセストークンを受け取る。
- 脆弱性への耐性が弱い。
- 現在はあまり推奨されていない。
- 代わりにPKCEが推奨されている。
