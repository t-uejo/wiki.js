---
title: 【Spring道場】モジュール3：Integration Test を実装する
description: 
published: true
date: 2024-11-12T13:01:19.367Z
tags: spring dojo, 統合テスト
editor: markdown
dateCreated: 2024-11-01T04:21:07.502Z
---

## 03-08_テストカバレッジはほどほどに
- なぜカバレッジを追求するのは良くないのか？

## 03-10_Spring での統合テスト
- Filter→Controllerのテストは統合テストと言うのか？
- Filterだけのテストは意味がないのか？

## 03-11_@SpringBootTest を付与したテストクラスを作成する
- `ApplicationContext`とは何か？
- `@SpringBootApplication`とは何か？どのような関係があるか？
- なぜ`@SpringBootTest`を使用して、ApplicationContextを作りたいのか？
- テストコードではAutowiredを使う理由は何か？そもそもなぜプロダクションコードでは、@Autowiredではなく、@RequiredArgsConstructorを使うのか？

## 03-16_トップページへのアクセスをテストする
### OAuthとかの統合テストもこれでできるか？
- OAuthでは複数のエンドポイントを実行する必要があるため、統合テストで検証する。

## 03-17_リファクタリング：テストメソッドの実行順に依存しないようにする
- 成功も失敗も同じ@Testの中で実行してもいいのだろうか？シナリオ毎に作成した方が理想では？

## その他
### テストの割合は適切か？
> 統合テストは1件のハッピーパス（ビジネスシナリオが正常に終わる経路）と単体テストでは検証できない全ての異常ケースを検証することが適切だと考えられています。
- 上記のように単体テスト本で書かれていることから、今回のログイン処理について評価すると、成功パターン1件と単体テストでは検証できない異常ケースを5件テストしている。
	- ログイン成功
  - ログイン失敗（CookieにXSRF-TOKENがない）
  - ログイン失敗（リクエストヘッダーにX-XSRF-TOKENがない）
  - ログイン失敗（Cookieとリクエストヘッダーのトークン値が異なる）
  - ログイン失敗（データベースにユーザが存在しない）
  - ログイン失敗（パスワード間違い）
  
### なぜ上記が結合テストと言えるのか？
- 複数の関連するフィルタやコントローラ、サービスを動かして、ビジネスシナリオであるログイン処理を検証しているため。

















